//
// Created by bulbasaur on 26/1/25.
//

#include "pic.h"
#include "../io/io.h"


void init_pic(){

  //initializing master and slave pics
  outb(0x20,0x11);
  outb(0xA0,0x11);

  outb(0x21,0x20);
  outb(0xA1,0x28);

  outb(0x21,0x04);
  outb(0xA1,0x02);

  outb(0x21,0x05);
  outb(0xA1,0x01);

  outb(0x21,0xfc);
  outb(0xA1,0xff);

  //pit init

  uint16_t div = 1193190 / 1000;
  outb(0x43,0x36);
  outb(0x40,div & 0xff);
  outb(0x40,(div >> 8) & 0xff);

  asm("sti");
}

void pic_ack() {
  outb(0x20,0x20);
}

uint8_t read_keyboard_data(){
  return inb(0x60);
}